<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel Admina â€“ Praktyki</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, rgba(56,189,248,0.1), transparent 70%), repeating-radial-gradient(circle at center, #0f0f0f 1px, transparent 3px);
      background-size: 300% 300%;
      animation: drift 60s linear infinite;
      z-index: -1;
    }

    @keyframes drift {
      0% { background-position: 0% 0%; }
      100% { background-position: 100% 100%; }
    }

    body {
      font-family: 'Inter', sans-serif;
      background: #0f0f0f;
      color: #eee;
      padding: 2rem;
    }

    h1, h2 {
      text-align: center;
    }

    label {
      display: block;
      margin: 1rem 0 0.2rem;
    }

    input, textarea, button, select {
      width: 100%;
      max-width: 600px;
      padding: 0.6rem;
      margin-bottom: 1rem;
      border: none;
      border-radius: 4px;
    }

    input, textarea, select {
      background: #222;
      color: #eee;
    }

    button {
      background: #3fa34d;
      color: #fff;
      cursor: pointer;
    }

    button:hover {
      background: #2d863a;
    }

    .entry {
      border: 1px solid #3fa34d;
      border-radius: 4px;
      padding: 1rem;
      margin: 1rem 0;
      background: #1a1a1a;
    }

    .entry button {
      background: #8b0000;
      margin-top: 0.5rem;
    }

    #update-info {
      margin-top: 2rem;
      color: #aaa;
      font-size: 0.9rem;
      text-align: center;
    }
  </style>
</head>
<body>
  <div id="login">
    <h2>ğŸ” Wpisz hasÅ‚o, aby uzyskaÄ‡ dostÄ™p</h2>
    <input type="password" id="pass" placeholder="HasÅ‚o..." />
    <button onclick="checkPassword()">Zaloguj</button>
  </div>

  <div id="panel" style="display:none;">
    <p style="text-align:center; margin-bottom: 1rem;">
      <a href="index.html" style="color:#38bdf8; text-decoration:underline;">â† PowrÃ³t do strony gÅ‚Ã³wnej</a>
    </p>

    <h1>ğŸ›¡ï¸ Panel Admina â€“ Praktyki</h1>

    <h2>ğŸ“° Edytuj Newsy</h2>
    <div id="news-editor">
      <label>TytuÅ‚</label>
      <input type="text" id="title">
      <label>Link</label>
      <input type="url" id="url">
      <label>Å¹rÃ³dÅ‚o</label>
      <input type="text" id="source">
      <label>Opis</label>
      <textarea id="description"></textarea>
      <label>Data</label>
      <input type="date" id="date">
      <button onclick="dodajNewsa()">Dodaj</button>
      <button onclick="pobierzJSON()">ğŸ“¥ Pobierz newsy.json</button>
      <div id="news-list"></div>
    </div>

    <div style="text-align:center; margin-top: 2rem;">
      <button onclick="wymusAktualizacje()">ğŸ”„ WymuÅ› aktualizacjÄ™ teraz</button>
      <div id="update-info"></div>
    </div>
  </div>

  <script>
    const hashedPassword = "2c6ee24b09816a6f14f95d1698b24ead"; 

    function md5(string) {
      return CryptoJS.MD5(string).toString();
    }

    function checkPassword() {
      const pass = document.getElementById("pass").value;
      if (md5(pass) === hashedPassword) {
        document.getElementById("login").style.display = "none";
        document.getElementById("panel").style.display = "block";
        pokazInfo();
      } else {
        alert("âŒ BÅ‚Ä™dne hasÅ‚o");
      }
    }

    function pokazInfo() {
      const zapis = localStorage.getItem("lastUpdate");
      const info = document.getElementById("update-info");
      if (info && zapis) {
        const data = new Date(zapis);
        info.textContent = `ğŸ•’ Ostatnia aktualizacja: ${data.toLocaleString("pl-PL")}`;
      }
    }

    let newsy = [];

    function dodajNewsa() {
      const entry = {
        title: document.getElementById("title").value,
        link: document.getElementById("url").value,
        source: document.getElementById("source").value,
        description: document.getElementById("description").value,
        date: document.getElementById("date").value
      };
      newsy.push(entry);
      aktualizujListe();
    }

    function aktualizujListe() {
      const container = document.getElementById("news-list");
      container.innerHTML = "";
      newsy.forEach((item, i) => {
        const div = document.createElement("div");
        div.className = "entry";
        div.innerHTML = `
          <strong>${item.title}</strong><br />
          <em>${item.source} | ${item.date}</em><br />
          <p>${item.description}</p>
          <button onclick="usunNewsa(${i})">UsuÅ„</button>
        `;
        container.appendChild(div);
      });
    }

    function usunNewsa(i) {
      newsy.splice(i, 1);
      aktualizujListe();
    }

    function pobierzJSON() {
      const blob = new Blob([JSON.stringify(newsy, null, 2)], { type: "application/json" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "newsy.json";
      link.click();
    }

    function wymusAktualizacje() {
      const teraz = new Date();
      localStorage.setItem("lastUpdate", teraz.toISOString());
      pokazInfo();
      alert("âœ… Aktualizacja oznaczona. OdÅ›wieÅ¼ stronÄ™, aby zobaczyÄ‡ zmiany.");
    }

    // Automatycznie pobierz istniejÄ…ce dane
    fetch("data/newsy.json")
      .then(res => res.json())
      .then(data => {
        newsy = data;
        aktualizujListe();
      });
  </script>
</body>
</html>
